{% comment %} <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Data Table</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
      }
      table,
      th,
      td {
        border: 1px solid black;
      }
      th,
      td {
        padding: 8px;
        text-align: center;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <h1>Weather Data Table</h1>
    <table>
      <thead>
        <tr>
          <th>Station</th>
          <th>Time</th>
          <th>Temperature (°C)</th>
          <th>Humidity (%)</th>
          <th>Wind Speed (m/s)</th>
          <th>Rainfall (mm)</th>
        </tr>
      </thead>
      <tbody>
        {% for data in weather_data %}
        <tr>
          <td>{{ data.station }}</td>
          <td>{{ data.time }}</td>
          <td>{{ data.temperature }}</td>
          <td>{{ data.humidity }}</td>
          <td>{{ data.wind_speed }}</td>
          <td>{{ data.rainfall }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
{% endcomment %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chart.js CDN -->
    <style>
      /* 툴팁 커스터마이즈 */
      .custom-tooltip {
        position: absolute;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 8px;
        border-radius: 4px;
        pointer-events: none;
        transform: translate(-50%, -100%);
        white-space: nowrap;
      }
    </style>
  </head>
  <body>
    <h1>Weather Data</h1>
    <!-- 관측소 선택 -->
    <form method="get" action="{% url 'weatherapi:chart' %}">
      <label for="station">Select Station:</label>
      <select name="station" id="station">
        <option value="119">Station 119</option>
        <option value="90">Station 90</option>
        <option value="80">Station 80</option>
        <!-- 필요한 관측소 번호 추가 -->
      </select>

      <!-- 날짜 선택 -->
      <label for="date">Select Date:</label>
      <input type="date" name="date" id="date" value="{{ default_date }}" />

      <!-- 검색 버튼 -->
      <button type="submit">Search</button>
    </form>

    <pre>
        Labels: {{ labels }}
        Temperature: {{ temperature_data }}
        Humidity: {{ humidity_data }}
    </pre>
    <canvas id="myChart" width="800" height="400"></canvas>
    <!-- 차트를 표시할 캔버스 -->
    <div id="tooltip" class="custom-tooltip" style="display: none"></div>

    <script>
      const ctx = document.getElementById('myChart').getContext('2d');
      const myChart = new Chart(ctx, {
          type: 'line',
          data: {
              labels: {{ labels|safe }},
              datasets: [
                  {
                      label: 'Temperature (°C)',
                      data: {{ temperature_data|safe }},
                      borderColor: 'rgba(255, 99, 132, 1)',
                      borderWidth: 2,
                      fill: false,
                  },
                  {
                      label: 'Humidity (%)',
                      data: {{ humidity_data|safe }},
                      borderColor: 'rgba(54, 162, 235, 1)',
                      borderWidth: 2,
                      fill: false,
                  }
              ]
          },
          options: {
              responsive: true,
          }
      });
    </script>
  </body>
</html>
